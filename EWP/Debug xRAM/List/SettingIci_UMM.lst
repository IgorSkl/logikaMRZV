###############################################################################
#
# IAR ANSI C/C++ Compiler V7.40.3.8902/W32 for ARM        15/Oct/2015  17:17:47
# Copyright 1999-2015 IAR Systems AB.
#
#    Cpu mode     =  arm
#    Endian       =  little
#    Source file  =  
#        D:\Program Files\IAR
#        Systems\MYWORK\HR1_0100_00_I720_new2\SettingIci\SettingIci_UMM.c
#    Command line =  
#        "D:\Program Files\IAR
#        Systems\MYWORK\HR1_0100_00_I720_new2\SettingIci\SettingIci_UMM.c" -lcN
#        "D:\Program Files\IAR Systems\MYWORK\HR1_0100_00_I720_new2\EWP\Debug
#        xRAM\List\" -o "D:\Program Files\IAR
#        Systems\MYWORK\HR1_0100_00_I720_new2\EWP\Debug xRAM\Obj\" --no_cse
#        --no_unroll --no_inline --no_code_motion --no_tbaa --no_clustering
#        --no_scheduling --debug --endian=little --cpu=ARM926EJ-S -e
#        --fpu=VFP9-S --dlib_config "D:\Program Files\IAR Systems\Embedded
#        Workbench 7.2\arm\INC\c\DLib_Config_Normal.h" -I "D:\Program Files\IAR
#        Systems\MYWORK\HR1_0100_00_I720_new2\EWP\..\NXP\" -I "D:\Program
#        Files\IAR Systems\MYWORK\HR1_0100_00_I720_new2\EWP\..\LIB\include\" -I
#        "D:\Program Files\IAR
#        Systems\MYWORK\HR1_0100_00_I720_new2\EWP\..\inc\" -I "D:\Program
#        Files\IAR Systems\MYWORK\HR1_0100_00_I720_new2\EWP\..\Igor\" -I
#        "D:\Program Files\IAR
#        Systems\MYWORK\HR1_0100_00_I720_new2\EWP\..\mal\" -I "D:\Program
#        Files\IAR Systems\MYWORK\HR1_0100_00_I720_new2\EWP\..\component\" -I
#        "D:\Program Files\IAR
#        Systems\MYWORK\HR1_0100_00_I720_new2\EWP\..\psupervisor\" -I
#        "D:\Program Files\IAR
#        Systems\MYWORK\HR1_0100_00_I720_new2\EWP\..\virtualMenu\" -I
#        "D:\Program Files\IAR
#        Systems\MYWORK\HR1_0100_00_I720_new2\EWP\..\callbackElement\" -I
#        "D:\Program Files\IAR
#        Systems\MYWORK\HR1_0100_00_I720_new2\EWP\..\logictimers\" -I
#        "D:\Program Files\IAR
#        Systems\MYWORK\HR1_0100_00_I720_new2\EWP\..\zonaVRT\" -I "D:\Program
#        Files\IAR Systems\MYWORK\HR1_0100_00_I720_new2\EWP\..\" --interwork
#        --cpu_mode arm -On --use_c++_inline
#    List file    =  
#        D:\Program Files\IAR Systems\MYWORK\HR1_0100_00_I720_new2\EWP\Debug
#        xRAM\List\SettingIci_UMM.lst
#    Object file  =  
#        D:\Program Files\IAR Systems\MYWORK\HR1_0100_00_I720_new2\EWP\Debug
#        xRAM\Obj\SettingIci_UMM.o
#
###############################################################################

D:\Program Files\IAR Systems\MYWORK\HR1_0100_00_I720_new2\SettingIci\SettingIci_UMM.c
      1          #include "lpc_types.h"
      2          #include "lpc_irq_fiq.h"
      3          #include "lpc_arm922t_cp15_driver.h"
      4          
      5          #include "lpc32xx_hstimer.h"
      6          #include "lpc32xx_ssp.h"
      7          #include "lpc32xx_gpio.h"
      8          
      9          #include "lpc32xx_intc_driver.h"
     10          #include "lpc32xx_clkpwr_driver.h"
     11          
     12          #include "arm926ej_cp15_drv.h"
     13          #include "ttbl.h"
     14          
     15          #include <stdio.h>
     16          #include <string.h>
     17          
     18          #include "psuperVisor\supermanager.h"
     19          
     20          #include "component\componentdef.h"
     21          #include "psuperVisor\psvisor_helpdef.h"
     22          
     23          #include "psuperVisor\psvisor_helpfnc.h"
     24          #include "SettingIci\SettingIci.h"
     25          #include "virtualmenu\systemmenufnc.h"
     26          
     27          #include "toSpeedOptim.h"
     28          #include "toSpeedDIS.h"
     29          
     30          #include "header.h"
     31          #include "ici_r_ef.h"
     32          
     33          #define _HIDE_COMPONENT
     34          #include "UMMComponent.c"
     35          
     36          extern char chProtectTableComeIn;
     37          extern char chResultCallGetMeasPrt;
     38          //extern tic long lDemo_IA,lDemo_IB,lDemo_IC;
     39          extern  long lMtz1,lMtz1Tmr,lSt1,lSt2, lst3, lst4;
     40          extern __MEASUREMENT_TO_PROTECTION TestMeasProtection;
     41          //extern int logicFlagUMM;
     42          
     43          int ustavkiZN=0;
     44          
     45          void  SettingIci_UMM()
     46          {
     47          //установки ICI UMM
     48          //-------------UMIN1-----------------------    
     49              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1UminPickup.ov_range_Umin;
     50              lMtz1Tmr = brCfgTbl.arPckpStpmStngStore[0].ownrStage1UminStageParam.time_stage_Umin;
     51          
     52            SetUstToClon(UMM_COMP1,  1, MNGUST_UMIN1_UMM, lMtz1);//уставка UMIN1 U
     53          
     54              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1UminPickup.ov_range_IblkUmin;
     55            SetUstToClon(UMM_COMP1,  1, MNGUST_IMIN1_UMM, lMtz1);//уставка UMIN1 IBLOK
     56            
     57            SetUstToClon(UMM_COMP1,  1, MNGVID3_UMM, lMtz1Tmr*10);//выдержка UMIN1 
     58            int uprUMM=0;
     59          //unsigned char state_Umin;       //Меню Состояние Umin
     60          //unsigned char state_SDEV_Umin;  //Меню Состояние ПО Umin И\ИЛИ 
     61          //unsigned char state_Umin_Ublk;  //Состояние ПО блокировки по напряжению
     62          //unsigned char state_Umin_Iblk;  //Состояние ПО блокировки по току
     63            //меню  Состояние UMIN1
     64          //.	Состояние
     65          //.	1 -вкл
     66          //.	0 - выкл
     67          ustavkiZN =
     68              lSt1 = brCfgTbl.ownrStg1UminMng.state_Umin;
     69            //logicFlagUMM = lSt1;
     70            if(lSt1>0) uprUMM |= 64; //UMIN1  WKL
     71            else  uprUMM &= ~64; //UMIN1  OTKL 
     72            
     73            //меню  блок по току UMIN1
     74          //.	Состояние
     75          //.	1 -вкл
     76          //.	0 - выкл
     77              lSt1 = brCfgTbl.ownrStg1UminMng.state_Umin_Iblk;
     78            if(lSt1>0) uprUMM |= 512; //UMIN1 IBLOK WKL
     79            else  uprUMM &= ~512; //UMIN1 IBLOK OTKL 
     80          
     81            //меню  логика UMIN1
     82          //.	Состояние
     83          //.	1 -ILI
     84          //.	0 - I
     85               lSt1 = brCfgTbl.ownrStg1UminMng.state_SDEV_Umin;
     86            if(lSt1>0) uprUMM |= 128; //UMIN1  ILI
     87            else  uprUMM &= ~128; //UMIN1  I
     88          
     89            //меню  логика UMIN2
     90            //Состояние ПО блокировки по напряжению
     91               lSt1 = brCfgTbl.ownrStg1UminMng.state_Umin_Ublk;
     92            if(lSt1>0) uprUMM |= 16384; //UMIN1  UBLOK
     93            else  uprUMM &= ~16384; //UMIN1  UBLOK
     94            
     95          //-------------UMIN2-----------------------    
     96              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage2UminPickup.ov_range_Umin;
     97              lMtz1Tmr = brCfgTbl.arPckpStpmStngStore[0].ownrStage2UminStageParam.time_stage_Umin;
     98          
     99            SetUstToClon(UMM_COMP1,  1, MNGUST_UMIN2_UMM, lMtz1);//уставка UMIN2 U
    100          
    101              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage2UminPickup.ov_range_IblkUmin;
    102            SetUstToClon(UMM_COMP1,  1, MNGUST_IMIN2_UMM, lMtz1);//уставка UMIN2 IBLOK
    103            
    104            SetUstToClon(UMM_COMP1,  1, MNGVID4_UMM, lMtz1Tmr*10);//выдержка UMIN2
    105            
    106          //unsigned char state_Umin;       //Меню Состояние Umin
    107          //unsigned char state_SDEV_Umin;  //Меню Состояние ПО Umin И\ИЛИ 
    108          //unsigned char state_Umin_Ublk;  //Состояние ПО блокировки по напряжению
    109          //unsigned char state_Umin_Iblk;  //Состояние ПО блокировки по току
    110            //меню  Состояние UMIN2
    111          //.	Состояние
    112          //.	1 -вкл
    113          //.	0 - выкл
    114              lSt1 = brCfgTbl.ownrStg2UminMng.state_Umin;
    115            if(lSt1>0) uprUMM |= 1024; //UMIN2  WKL
    116            else  uprUMM &= ~1024; //UMIN2  OTKL 
    117            
    118            //меню  фазы UMIN1_2
    119          //.	Состояние
    120          //.	1 -лин
    121          //.	0 - фазн
    122               lSt1 = brCfgTbl.state_SDEV_Phase_Umin;
    123            if(lSt1>0) uprUMM |= 256; //UMIN1_2  LIN
    124            else  uprUMM &= ~256; //UMIN1_2  FAZ
    125            if(lSt1>0) uprUMM |= 4096; //UMIN1_2  LIN
    126            else  uprUMM &= ~4096; //UMIN1_2  FAZ
    127            
    128            //меню  блок по току UMIN2
    129          //.	Состояние
    130          //.	1 -вкл
    131          //.	0 - выкл
    132              lSt1 = brCfgTbl.ownrStg2UminMng.state_Umin_Iblk;
    133            if(lSt1>0) uprUMM |= 8192; //UMIN2 IBLOK WKL
    134            else  uprUMM &= ~8192; //UMIN2 IBLOK OTKL 
    135          
    136            //меню  логика UMIN2
    137          //.	Состояние
    138          //.	1 -ILI
    139          //.	0 - I
    140               lSt1 = brCfgTbl.ownrStg2UminMng.state_SDEV_Umin;
    141            if(lSt1>0) uprUMM |= 2048; //UMIN2  ILI
    142            else  uprUMM &= ~2048; //UMIN2  I
    143          
    144            //меню  логика UMIN2
    145            //Состояние ПО блокировки по напряжению
    146               lSt1 = brCfgTbl.ownrStg2UminMng.state_Umin_Ublk;
    147            if(lSt1>0) uprUMM |= 32768; //UMIN2  UBLOK
    148            else  uprUMM &= ~32768; //UMIN2  UBLOK
    149          
    150          //-------------UMAX1-----------------------    
    151              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1UmaxPickup.ov_range_Umax;
    152              lMtz1Tmr = brCfgTbl.arPckpStpmStngStore[0].ownrStage1UmaxStageParam.time_stage_Umax;
    153              
    154            SetUstToClon(UMM_COMP1,  1, MNGUST_UMAX1_UMM, lMtz1);//уставка UMAX1 U
    155            SetUstToClon(UMM_COMP1,  1, MNGVID1_UMM, lMtz1Tmr*10);//выдержка UMAX1
    156            
    157          //unsigned char state_Umax;     //Меню Состояние Umax1
    158          //unsigned char state_SDEV_Umax;//Меню Состояние ПО Umax1 И\ИЛИ 
    159            //меню  Состояние UMAX1
    160          //.	Состояние
    161          //.	1 -вкл
    162          //.	0 - выкл
    163              lSt1 = brCfgTbl.ownrStg1UmaxMng.state_Umax;
    164            if(lSt1>0) uprUMM |= 1; //UMAX1  WKL
    165            else  uprUMM &= ~1; //UMAX1  OTKL 
    166          
    167            //меню  логика UMAX1
    168          //.	Состояние
    169          //.	1 -ILI
    170          //.	0 - I
    171               lSt1 = brCfgTbl.ownrStg1UmaxMng.state_SDEV_Umax;
    172            if(lSt1>0) uprUMM |= 2; //UMAX1  ILI
    173            else  uprUMM &= ~2; //UMAX1  I
    174          
    175          //-------------UMAX2-----------------------    
    176              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage2UmaxPickup.ov_range_Umax;
    177              lMtz1Tmr = brCfgTbl.arPckpStpmStngStore[0].ownrStage2UmaxStageParam.time_stage_Umax;
    178              
    179            SetUstToClon(UMM_COMP1,  1, MNGUST_UMAX2_UMM, lMtz1);//уставка UMAX2 U
    180            SetUstToClon(UMM_COMP1,  1, MNGVID2_UMM, lMtz1Tmr*10);//выдержка UMAX2
    181            
    182          //unsigned char state_Umax;     //Меню Состояние Umax1
    183          //unsigned char state_SDEV_Umax;//Меню Состояние ПО Umax1 И\ИЛИ 
    184            //меню  Состояние UMAX2
    185          //.	Состояние
    186          //.	1 -вкл
    187          //.	0 - выкл
    188              lSt1 = brCfgTbl.ownrStgU2maxMng.state_Umax;
    189            if(lSt1>0) uprUMM |= 8; //UMAX2  WKL
    190            else  uprUMM &= ~8; //UMAX2  OTKL 
    191          
    192            //меню  логика UMAX2
    193          //.	Состояние
    194          //.	1 -ILI
    195          //.	0 - I
    196               lSt1 = brCfgTbl.ownrStgU2maxMng.state_SDEV_Umax;
    197            if(lSt1>0) uprUMM |= 16; //UMAX2  ILI
    198            else  uprUMM &= ~16; //UMAX2  I
    199            
    200            //меню  фазы UMAX1_2
    201          //.	Состояние
    202          //.	1 -лин
    203          //.	0 - фазн
    204               lSt1 = brCfgTbl.state_SDEV_Phase_Umax;
    205            if(lSt1>0) uprUMM |= 4; //UMAX1_2  LIN
    206            else  uprUMM &= ~4; //UMAX1_2  FAZ
    207            if(lSt1>0) uprUMM |= 32; //UMAX1_2  LIN
    208            else  uprUMM &= ~32; //UMAX1_2  FAZ
    209            
    210            SetUstToClon(UMM_COMP1,  1, MNGUPR_UMM, uprUMM);//управление UMM
    211            
    212          }//
    213          

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       8   SettingIci_UMM
         8   -> SetUstToClon


   Section sizes:

   Bytes  Function/Label
   -----  --------------
    1264  SettingIci_UMM
       4  ustavkiZN

 
     4 bytes in section .bss
 1 264 bytes in section .text
 
 1 264 bytes of CODE memory
     4 bytes of DATA memory

Errors: none
Warnings: none
