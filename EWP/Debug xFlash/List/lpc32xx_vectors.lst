###############################################################################
#                                                                             #
#     IAR Assembler V7.40.2.8542/W32 for ARM 20/Oct/2015  12:49:35            #
#     Copyright 1999-2015 IAR Systems AB.                                     #
#                                                                             #
#           Source file   =  D:\IAR projects\HR1_0100_00_I720_new2\LIB\source\lpc32xx_vectors.s#
#           List file     =  D:\IAR projects\HR1_0100_00_I720_new2\EWP\Debug xFlash\List\lpc32xx_vectors.lst#
#           Object file   =  D:\IAR projects\HR1_0100_00_I720_new2\EWP\Debug xFlash\Obj\lpc32xx_vectors.o#
#           Command line  =  D:\IAR projects\HR1_0100_00_I720_new2\LIB\source\lpc32xx_vectors.s #
#                            -OD:\IAR projects\HR1_0100_00_I720_new2\EWP\Debug xFlash\Obj\ #
#                            -s+ -M<> -w+ -r -DICODE_IRAM_DEF                 #
#                            -LD:\IAR projects\HR1_0100_00_I720_new2\EWP\Debug xFlash\List\ #
#                            -t8 --cpu ARM926EJ-S --fpu VFP9-S                #
#                                                                             #
###############################################################################

    1                           MODE_MSK DEFINE 0x1F            ; Bit mask for
                                 mode bits in CPSR
    2                           USR_MODE DEFINE 0x10            ; User
                                 mode
    3                           FIQ_MODE DEFINE 0x11            ; Fast
                                 Interrupt Request mode
    4                           IRQ_MODE DEFINE 0x12            ; Interrupt
                                 Request mode
    5                           SVC_MODE DEFINE 0x13            ; Supervisor
                                 mode
    6                           ABT_MODE DEFINE 0x17            ; Abort
                                 mode
    7                           UND_MODE DEFINE 0x1B            ; Undefined
                                 Instruction mode
    8                           SYS_MODE DEFINE 0x1F            ; System
                                 mode
    9                           
   10                           #define I_BIT            0x80
   11                           #define F_BIT            0x40
   12                           
   13                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
   14                           ; $Id: lpc32xx_vectors.s 30870 2009-07-05
                                 10:16:16Z anderslu $
   15                           ; 
   16                           ; Project: LPC32xx interrupt and exception
                                 vectors
   17                           ;
   18                           ; Description:
   19                           ;     Interrupt and exception handler vector
                                 layout used by the
   20                           ;     interrupt driver, exception functions,
                                 and startup code. This
   21                           ;     block is placed at the start of the ARM
                                 memory region at address
   22                           ;     0x00000000 or 0xFFFF0000 (if high
                                 vectors are enabled).
   23                           ;
   24                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
   25                            ; Software that is described herein is for
                                 illustrative purposes only  
   26                            ; which provides customers with programming
                                 information regarding the  
   27                            ; products. This software is supplied "AS IS"
                                 without any warranties.  
   28                            ; NXP Semiconductors assumes no responsibilit
                                y or liability for the 
   29                            ; use of the software, conveys no license or
                                 title under any patent, 
   30                            ; copyright, or mask work right to the
                                 product. NXP Semiconductors 
   31                            ; reserves the right to make changes in the
                                 software without 
   32                            ; notification. NXP Semiconductors also make
                                 no representation or 
   33                            ; warranty that such application will be
                                 suitable for the specified 
   34                            ; use without further testing or modification
                                . 
   35                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
   36                           
   37                               MODULE ?lpc32xx_vectors
   38                               
   39                               PUBLIC lpc32xx_reset_vector
   40                               PUBLIC vec_reset_handler
   41                               PUBLIC vec_undefined_handler
   42                               PUBLIC vec_swi_handler
   43                               PUBLIC vec_prefetch_handler
   44                               PUBLIC vec_abort_handler
   45                               PUBLIC vec_irq_handler
   46                               PUBLIC vec_fiq_handler
   47                               
   48                               PUBLIC lpc32xx_irq_handler
   49                               PUBLIC lpc32xx_fiq_handler
   50                               EXTERN irq_func_ptrs
   51                               
   52                           
   53                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
   54                           ;
   55                           ; Function: Basic interrupt and exception jump
                                 block
   56                           ;
   57                           ; Purpose: Block that defines the interrupt
                                 and exception jump points
   58                           ;
   59                           ; Description:
   60                           ;     On a bootable image that is being built,
                                 this area should be
   61                           ;     linked to address 0x00000000. This area
                                 may be used with the
   62                           ;     interrupt and exception drivers when
                                 installing handlers and
   63                           ;     routers. For each interrupt and
                                 exception that gets routed
   64                           ;     here, the indirect PC value of the
                                 handler function is loaded
   65                           ;     to jump to that function.
   66                           ;
   67                           ; Parameters: NA
   68                           ;
   69                           ; Outputs; NA
   70                           ;
   71                           ; Returns: NA
   72                           ;
   73                           ; Notes: NA
   74                           ;
   75                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
   76                           
   77                             SECTION .text:CODE:ROOT(2)
   78                             ARM
   79                                   
   80                           lpc32xx_reset_vector
   81    00000000 18F09FE5          LDR  pc, [pc, #24]          ; Get address
                                                                 of Reset
                                                                 handler
   82    00000004 18F09FE5          LDR  pc, [pc, #24]          ; Get address
                                                                 of Undefined
                                                                 handler
   83    00000008 18F09FE5          LDR  pc, [pc, #24]          ; Get address
                                                                 of SWI
                                                                 handler
   84    0000000C 18F09FE5          LDR  pc, [pc, #24]          ; Get address
                                                                 of Prefetch
                                                                 handler
   85    00000010 18F09FE5          LDR  pc, [pc, #24]          ; Get address
                                                                 of Abort
                                                                 handler
   86    00000014 0000A0E1          NOP                         ; Reserved
   87    00000018 14F09FE5          LDR  pc, [pc, #20]          ; Get address
                                                                 of IRQ
                                                                 handler
   88    0000001C 14F09FE5          LDR  pc, [pc, #20]          ; Get address
                                                                 of FIQ
                                                                 handler
   89                           
   90                           vec_reset_handler
   91    00000020 ........          DCD  lpc32xx_reset_handler
   92                           
   93                           vec_undefined_handler
   94    00000024 ........          DCD  lpc32xx_undefined_handler
   95                           
   96                           vec_swi_handler
   97    00000028 ........          DCD  lpc32xx_swi_handler
   98                           
   99                           vec_prefetch_handler
  100    0000002C ........          DCD  lpc32xx_prefetch_handler
  101                           
  102                           vec_abort_handler
  103    00000030 ........          DCD  lpc32xx_abort_handler
  104                           
  105                           vec_irq_handler
  106    00000034 ........          DCD  lpc32xx_irq_handler
  107                           
  108                           vec_fiq_handler
  109    00000038 ........          DCD  lpc32xx_fiq_handler
  110                           
  111                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
  112                           ;
  113                           ;
  114                           ; Function: lpc32xx_reset_handler
  115                           ;
  116                           ; Purpose:
  117                           ;   Default reset handler
  118                           ; 
  119                           ; Processing:
  120                           ;   Loop forever
  121                           ;
  122                           ; Parameters: None
  123                           ;
  124                           ; Outputs:  None
  125                           ;
  126                           ; Returns: Nothing
  127                           ;
  128                           ; Notes:
  129                           ;     The board startup code does not use this
                                 handler! However, when
  130                           ;     the interrupt and exception table is
                                 installed, the reset handler
  131                           ;     will be updated to this handler.
  132                           ;
  133                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
  134                           lpc32xx_reset_handler
  135    0000003C FEFFFFEA          B    lpc32xx_reset_handler
  136                           
  137                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
  138                           ;
  139                           ;
  140                           ; Function: lpc32xx_undefined_handler
  141                           ;
  142                           ; Purpose:
  143                           ;   Handle the undefined exception
  144                           ; 
  145                           ; Processing:
  146                           ;   Loop forever
  147                           ;
  148                           ; Parameters: None
  149                           ;
  150                           ; Outputs:  None
  151                           ;
  152                           ; Returns: Nothing
  153                           ;
  154                           ; Notes: None
  155                           ;
  156                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
  157                           lpc32xx_undefined_handler
  158    00000040 FEFFFFEA          B    lpc32xx_undefined_handler
  159                           
  160                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
  161                           ;
  162                           ;
  163                           ; Function: lpc32xx_swi_handler
  164                           ;
  165                           ; Purpose:
  166                           ;   Handle the software interrupt
  167                           ; 
  168                           ; Processing:
  169                           ;   Loop forever
  170                           ;
  171                           ; Parameters: None
  172                           ;
  173                           ; Outputs:  None
  174                           ;
  175                           ; Returns: Nothing
  176                           ;
  177                           ; Notes: None
  178                           ;
  179                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
  180                           lpc32xx_swi_handler
  181    00000044 FEFFFFEA          B    lpc32xx_swi_handler
  182                           
  183                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
  184                           ;
  185                           ;
  186                           ; Function: lpc32xx_prefetch_handler
  187                           ;
  188                           ; Purpose:
  189                           ;   Handle the prefetch abort exception
  190                           ; 
  191                           ; Processing:
  192                           ;   Loop forever
  193                           ;
  194                           ; Parameters: None
  195                           ;
  196                           ; Outputs:  None
  197                           ;
  198                           ; Returns: Nothing
  199                           ;
  200                           ; Notes: None
  201                           ;
  202                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
  203                           lpc32xx_prefetch_handler
  204    00000048 FEFFFFEA          B    lpc32xx_prefetch_handler
  205                           
  206                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
  207                           ;
  208                           ;
  209                           ; Function: lpc32xx_abort_handler
  210                           ;
  211                           ; Purpose:
  212                           ;   Handle the abort exception
  213                           ; 
  214                           ; Processing:
  215                           ;   Loop forever
  216                           ;
  217                           ; Parameters: None
  218                           ;
  219                           ; Outputs:  None
  220                           ;
  221                           ; Returns: Nothing
  222                           ;
  223                           ; Notes: None
  224                           ;
  225                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
  226                           lpc32xx_abort_handler
  227    0000004C FEFFFFEA          B    lpc32xx_abort_handler
  228                           
  229                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
  230                           ;
  231                           ;
  232                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
  233                           ; Function: lpc32xx_irq_handler
  234                           ;
  235                           ; Purpose:
  236                           ;   Handle the IRQ interrupt
  237                           ; 
  238                           ; Processing:
  239                           ;   Loop forever
  240                           ;
  241                           ; Parameters: None
  242                           ;
  243                           ; Outputs:  None
  244                           ;
  245                           ; Returns: Nothing
  246                           ;
  247                           ; Notes: None
  248                           ;
  249                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
  250                           lpc32xx_irq_handler
  251    00000050 04E04EE2          SUB lr, lr, #4                 ; Get return
                                                                    address
                                                                    
  252    00000054 00402DE9          STMFD sp!, {lr}                ; Save
                                                                    registers
                                                                    
  253                           
  254    00000058 00E04FE1              MRS     lr, SPSR
  255    0000005C 00402DE9              STMFD   sp!, {lr}
  256                           
  257    00000060 9FF021E3              MSR     CPSR_c, #SYS_MODE | I_BIT
  258    00000064 FF5F2DE9              STMFD   sp!, {r0-r12, lr}
  259                                   
  260                           //        VMRS    R0, FPSCR
  261                           //        STMFD   sp!,{R0}
  262                           //        BIC     R0,R0,#0x70000
  263                           //        VMSR    FPSCR,R0
  264                           //        VSTMDB  sp!,{D0-D7}
  265                           
  266    00000068 0060E0E3          LDR    r6, =0xFFFFFFFF
  267                           
  268                           ; Read the MIC interrupt status registers
                                 
  269    0000006C 4C219FE5          LDR    r2, =MIC_BASE_ADDR
  270    00000070 083092E5          LDR    r3, [r2, #IRQ_STATUS_OFF]
  271    00000074 F033C3E3          AND    r3, r3, #0x3FFFFFFC ; Mask off
                                                                subFIQ
                                                                bits
  272    00000078 145092E5          LDR    r5, [r2, #ITR_OFF]
  273    0000007C 065025E0          EOR    r5, r5, r6 ;інвертуємо біт, щоб 1
                                                       відповідав за IRQ а 0 -
                                                       FIQ
  274    00000080 053003E0          AND    r3, r3, r5 ; Визначаємо біти, які
                                                       відповідають за
                                                       IRQ
  275    00000084 0040A0E3          MOV    r4, #0
  276                           
  277                               ; If there the MIC IRQ status is 0, then
                                 there are no MIC
  278                               ; interrupts pending. That means, go
                                 service SIC1 interrupts
  279                               ; instead. 
  280                           service_mic_irq
  281    00000088 000053E3          CMP    r3, #0                  
  282    0000008C 1000001A          BNE    int_found_irq 
  283                               ; The interrupt was not from MIC
  284                           service_sic1_irq
  285                               ; Read the SIC1 interrupt status registers
                                 
  286    00000090 2C219FE5          LDR    r2, =SIC1_BASE_ADDR     
  287    00000094 083092E5          LDR    r3, [r2, #IRQ_STATUS_OFF]
  288    00000098 145092E5          LDR    r5, [r2, #ITR_OFF]
  289    0000009C 065025E0          EOR    r5, r5, r6 ;інвертуємо біт, щоб 1
                                                       відповідав за IRQ а 0 -
                                                       FIQ
  290    000000A0 053003E0          AND    r3, r3, r5 ; Визначаємо біти, які
                                                       відповідають за
                                                       IRQ
  291    000000A4 2040A0E3          MOV    r4, #32
  292                           
  293                               ; If there the SIC1 IRQ status is 0, then
                                 there are no SIC1
  294                               ; interrupts pending. That means, go
                                 service SIC2 interrupts
  295                               ; instead. 
  296    000000A8 000053E3          CMP    r3, #0                  
  297    000000AC 0800001A          BNE    int_found_irq 
  298                               ; The interrupt was not from SIC1
  299                           
  300                           service_sic2_irq
  301                               ; Read the SIC2 interrupt status registers
                                 
  302    000000B0 10219FE5          LDR    r2, =SIC2_BASE_ADDR     
  303    000000B4 083092E5          LDR    r3, [r2, #IRQ_STATUS_OFF]
  304    000000B8 145092E5          LDR    r5, [r2, #ITR_OFF]
  305    000000BC 065025E0          EOR    r5, r5, r6 ;інвертуємо біт, щоб 1
                                                       відповідав за IRQ а 0 -
                                                       FIQ
  306    000000C0 053003E0          AND    r3, r3, r5 ; Визначаємо біти, які
                                                       відповідають за
                                                       IRQ
  307    000000C4 4040A0E3          MOV    r4, #64
  308    000000C8 000053E3          CMP    r3, #0                  
  309    000000CC 0000001A          BNE    int_found_irq 
  310                           
  311    000000D0 0900000A          BEQ    int_exit_irq 
  312                               ; The interrupt was not from SIC2
  313                           
  314                           int_found_irq
  315    000000D4 131F6FE1          CLZ    r1, r3
  316    000000D8 1F1061E2          RSB    r1, r1, #31
  317    000000DC 041081E0          ADD    r1, r1, r4
  318    000000E0 E4009FE5          LDR    r0, =irq_func_ptrs    ; Get address
                                                                  of jump table
                                                                  
  319    000000E4 010180E0          ADD    r0, r0, r1, LSL #2    ; Add by
                                                                  interrupt
                                                                  offset
                                                                  
  320    000000E8 000090E5          LDR    r0, [r0]              ; Get handler
                                                                  address
                                                                  
  321    000000EC 000050E3          CMP    r0, #0                ; Is handler
                                                                  address NULL?
                                                                  
  322    000000F0 0100000A          BEQ    int_exit_irq          ; If null, the
                                                                  exit
                                                                  
  323    000000F4 0FE0A0E1          MOV    lr, pc                ; Will return
                                                                  to int_exit
                                                                  
  324    000000F8 10FF2FE1          BX     r0                    ; Jump to
                                                                  handler
                                                                  
  325                           
  326                           int_exit_irq
  327                                   
  328                           //        VLDM   sp!, {D0-D7}
  329                           //        LDMIA   sp!, {R0}
  330                           //        VMSR     FPSCR,R0
  331                           
  332    000000FC FF5FBDE8              LDMIA   sp!, {r0-r12, lr}
  333    00000100 92F021E3              MSR     CPSR_c, #IRQ_MODE | I_BIT
  334                           
  335    00000104 0040BDE8              LDMIA   sp!, {lr}
  336    00000108 0EF06FE1              MSR     SPSR_cxsf, lr
  337                                   
  338    0000010C 0080FDE8          LDMFD  sp!, {pc}^    ; Restore registers
                                                          and exit 
  339                           
  340                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
  341                           ;
  342                           ;
  343                           ; Function: lpc32xx_fiq_handler
  344                           ;
  345                           ; Purpose:
  346                           ;   Handle the FIQ interrupt
  347                           ; 
  348                           ; Processing:
  349                           ;   Loop forever
  350                           ;
  351                           ; Parameters: None
  352                           ;
  353                           ; Outputs:  None
  354                           ;
  355                           ; Returns: Nothing
  356                           ;
  357                           ; Notes: None
  358                           ;
  359                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
  360                           lpc32xx_fiq_handler
  361    00000110 04E04EE2          SUB lr, lr, #4                 ; Get return
                                                                    address
                                                                    
  362    00000114 00402DE9          STMFD sp!, {lr}                ; Save
                                                                    registers
                                                                    
  363                           
  364    00000118 00E04FE1              MRS     lr, SPSR
  365    0000011C 00402DE9              STMFD   sp!, {lr}
  366                           
  367    00000120 DFF021E3              MSR     CPSR_c, #SYS_MODE | I_BIT |
                                                 F_BIT
  368    00000124 FF5F2DE9              STMFD   sp!, {r0-r12, lr}
  369                                   
  370                           //        VMRS    R0, FPSCR
  371                           //        STMFD   sp!,{R0}
  372                           //        BIC     R0,R0,#0x70000
  373                           //        VMSR    FPSCR,R0
  374                           //        VSTMDB  sp!,{D0-D7}
  375                           
  376                           ; Read the MIC interrupt status registers
                                 
  377    00000128 90209FE5          LDR    r2, =MIC_BASE_ADDR
  378    0000012C 083092E5          LDR    r3, [r2, #IRQ_STATUS_OFF]
  379    00000130 0330C3E3          AND    r3, r3, #0xFFFFFFFC ; Mask off
                                                                subIRQ
                                                                bits
  380    00000134 145092E5          LDR    r5, [r2, #ITR_OFF]
  381    00000138 053003E0          AND    r3, r3, r5 ; Визначаємо біти, які
                                                       відповідають за
                                                       FIQ
  382    0000013C 0040A0E3          MOV    r4, #0
  383                           
  384                               ; If there the MIC FIQ status is 0, then
                                 there are no MIC
  385                               ; interrupts pending. That means, go
                                 service SIC1 interrupts
  386                               ; instead. 
  387                           service_mic_fiq
  388    00000140 000053E3          CMP    r3, #0                  
  389    00000144 0E00001A          BNE    int_found_fiq 
  390                               ; The interrupt was not from MIC
  391                           service_sic1_fiq
  392                               ; Read the SIC1 interrupt status registers
                                 
  393    00000148 74209FE5          LDR    r2, =SIC1_BASE_ADDR     
  394    0000014C 083092E5          LDR    r3, [r2, #IRQ_STATUS_OFF]
  395    00000150 145092E5          LDR    r5, [r2, #ITR_OFF]
  396    00000154 053003E0          AND    r3, r3, r5 ; Визначаємо біти, які
                                                       відповідають за
                                                       FIQ
  397    00000158 2040A0E3          MOV    r4, #32
  398                           
  399                               ; If there the SIC1 FIQ status is 0, then
                                 there are no SIC1
  400                               ; interrupts pending. That means, go
                                 service SIC2 interrupts
  401                               ; instead. 
  402    0000015C 000053E3          CMP    r3, #0                  
  403    00000160 0700001A          BNE    int_found_fiq 
  404                               ; The interrupt was not from SIC1
  405                           
  406                           service_sic2_fiq
  407                               ; Read the SIC2 interrupt status registers
                                 
  408    00000164 5C209FE5          LDR    r2, =SIC2_BASE_ADDR     
  409    00000168 083092E5          LDR    r3, [r2, #IRQ_STATUS_OFF]
  410    0000016C 145092E5          LDR    r5, [r2, #ITR_OFF]
  411    00000170 053003E0          AND    r3, r3, r5 ; Визначаємо біти, які
                                                       відповідають за
                                                       IRQ
  412    00000174 4040A0E3          MOV    r4, #64
  413    00000178 000053E3          CMP    r3, #0                  
  414    0000017C 0000001A          BNE    int_found_fiq 
  415                           
  416    00000180 0900000A          BEQ    int_exit_fiq 
  417                               ; The interrupt was not from SIC2
  418                           
  419                           int_found_fiq
  420    00000184 131F6FE1          CLZ    r1, r3
  421    00000188 1F1061E2          RSB    r1, r1, #31
  422    0000018C 041081E0          ADD    r1, r1, r4
  423    00000190 34009FE5          LDR    r0, =irq_func_ptrs    ; Get address
                                                                  of jump table
                                                                  
  424    00000194 010180E0          ADD    r0, r0, r1, LSL #2    ; Add by
                                                                  interrupt
                                                                  offset
                                                                  
  425    00000198 000090E5          LDR    r0, [r0]              ; Get handler
                                                                  address
                                                                  
  426    0000019C 000050E3          CMP    r0, #0                ; Is handler
                                                                  address NULL?
                                                                  
  427    000001A0 0100000A          BEQ    int_exit_fiq              ; If null,
                                             the exit 
  428    000001A4 0FE0A0E1          MOV    lr, pc                ; Will return
                                                                  to int_exit_f
                                                                 iq 
  429    000001A8 10FF2FE1          BX     r0                    ; Jump to
                                                                  handler
                                                                  
  430                           
  431                           int_exit_fiq
  432                                   
  433                           //        VLDM   sp!, {D0-D7}
  434                           //        LDMIA   sp!, {R0}
  435                           //        VMSR     FPSCR,R0
  436                           
  437    000001AC FF5FBDE8              LDMIA   sp!, {r0-r12, lr}
  438    000001B0 D1F021E3              MSR     CPSR_c, #FIQ_MODE | I_BIT |
                                                 F_BIT
  439                           
  440    000001B4 0040BDE8              LDMIA   sp!, {lr}
  441    000001B8 0EF06FE1              MSR     SPSR_cxsf, lr
  442                                   
  443    000001BC 0080FDE8          LDMFD  sp!, {pc}^    ; Restore registers
                                                          and exit 
  444                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                ;;;;;;;;;;;;;;;;;;;;;;;;;;
  445                           
  446                           MIC_BASE_ADDR  EQU 0x40008000 ; Base address
                                 of MIC
  447                           SIC1_BASE_ADDR EQU 0x4000C000 ; Base address
                                 of SIC1
  448                           SIC2_BASE_ADDR EQU 0x40010000 ; Base address
                                 of SIC2
  449                           IRQ_STATUS_OFF EQU 0x08       ; Offset to IRQ
                                 status 
  450                           ITR_OFF        EQU 0x14       ; Зміщення до
                                 регістру  ITR
  451                           
  451.1                                  TABLE
  451.2  000001C0 00800040              Reference on line 269,377
  451.3  000001C4 00C00040              Reference on line 286,393
  451.4  000001C8 00000140              Reference on line 302,408
  451.5  000001CC ........              Reference on line 318,423
  452                               END
##############################
#           CRC:0            #
#        Errors:   0         #
#        Warnings: 0         #
#         Bytes: 464         #
##############################



