###############################################################################
#
# IAR ANSI C/C++ Compiler V7.40.2.8542/W32 for ARM        20/Oct/2015  12:49:42
# Copyright 1999-2015 IAR Systems AB.
#
#    Cpu mode     =  arm
#    Endian       =  little
#    Source file  =  
#        D:\IAR projects\HR1_0100_00_I720_new2\SettingIci\SettingIci_DZ1.c
#    Command line =  
#        "D:\IAR projects\HR1_0100_00_I720_new2\SettingIci\SettingIci_DZ1.c" -D
#        _STATIC_MEMORY_BOOT -lcN "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\Debug xFlash\List\" -o "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\Debug xFlash\Obj\" --no_cse
#        --no_unroll --no_inline --no_code_motion --no_tbaa --no_clustering
#        --no_scheduling --debug --endian=little --cpu=ARM926EJ-S -e
#        --fpu=VFP9-S --dlib_config "C:\Program Files\IAR Systems\Embedded
#        Workbench 7.40\arm\INC\c\DLib_Config_Normal.h" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\NXP\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\LIB\include\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\inc\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\Igor\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\mal\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\component\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\psupervisor\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\virtualMenu\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\callbackElement\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\logictimers\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\zonaVRT\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\" --cpu_mode arm -On
#        --use_c++_inline
#    List file    =  
#        D:\IAR projects\HR1_0100_00_I720_new2\EWP\Debug
#        xFlash\List\SettingIci_DZ1.lst
#    Object file  =  
#        D:\IAR projects\HR1_0100_00_I720_new2\EWP\Debug
#        xFlash\Obj\SettingIci_DZ1.o
#
###############################################################################

D:\IAR projects\HR1_0100_00_I720_new2\SettingIci\SettingIci_DZ1.c
      1          #include "lpc_types.h"
      2          #include "lpc_irq_fiq.h"
      3          #include "lpc_arm922t_cp15_driver.h"
      4          
      5          #include "lpc32xx_hstimer.h"
      6          #include "lpc32xx_ssp.h"
      7          #include "lpc32xx_gpio.h"
      8          
      9          #include "lpc32xx_intc_driver.h"
     10          #include "lpc32xx_clkpwr_driver.h"
     11          
     12          #include "arm926ej_cp15_drv.h"
     13          #include "ttbl.h"
     14          
     15          #include <stdio.h>
     16          #include <string.h>
     17          
     18          #include "psuperVisor\supermanager.h"
     19          
     20          #include "component\componentdef.h"
     21          #include "psuperVisor\psvisor_helpdef.h"
     22          
     23          #include "psuperVisor\psvisor_helpfnc.h"
     24          #include "SettingIci\SettingIci.h"
     25          #include "virtualmenu\systemmenufnc.h"
     26          
     27          #include "toSpeedOptim.h"
     28          #include "toSpeedDIS.h"
     29          
     30          #include "header.h"
     31          #include "ici_r_ef.h"
     32          
     33          #define _HIDE_COMPONENT
     34          //#include "PRM1Component.c"
     35          #include "DZ1Component.c"
     36          
     37          extern char chProtectTableComeIn;
     38          extern char chResultCallGetMeasPrt;
     39          //extern tic long lDemo_IA,lDemo_IB,lDemo_IC;
     40          extern  long lMtz1,lMtz1Tmr,lSt1,lSt2, lst3, lst4;
     41          extern __MEASUREMENT_TO_PROTECTION TestMeasProtection;
     42          
     43          //координаты вершин зоны сработки
     44          extern float X1;
     45          extern float Y1;
     46          
     47          extern float X2;
     48          extern float Y2;
     49          
     50          extern float X3;
     51          extern float Y3;
     52          
     53          extern float X4;
     54          extern float Y4;
     55          
     56          /*
     57           float X1OF_DZ1, Y1OF_DZ1, X2OF_DZ1, Y2OF_DZ1;
     58           float X3OF_DZ1, Y3OF_DZ1, X4OF_DZ1, Y4OF_DZ1;
     59          
     60           float X1MF_DZ1, Y1MF_DZ1, X2MF_DZ1, Y2MF_DZ1;
     61           float X3MF_DZ1, Y3MF_DZ1, X4MF_DZ1, Y4MF_DZ1;
     62          */
     63          
     64          void  SettingIci_DZ1()
     65          {
     66          //float diskr = 0.001;
     67          //Ток МТЗ ДЗ1МФ
     68              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1Pickup.Dstp1_Iovp_ov_range;
     69              SetUstToClon(DZ_COMP1,  1, MNGUST_DZ1_MTZ, lMtz1);//уставка MTZ
     70          
     71          //-----------OF
     72          //Re1
     73              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1Pickup.Z_OF_Dstp1_P1_R;
     74          //    X1OF_DZ1 = ((float)lMtz1)*diskr;
     75              SetUstToClon(DZ_COMP1,  1, MNGUST_DZ1_OX1, lMtz1);//уставка X1OF_DZ1
     76          
     77          //Im1
     78              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1Pickup.Z_OF_Dstp1_P1_X;
     79          //    Y1OF_DZ1 = ((float)lMtz1)*diskr;
     80              SetUstToClon(DZ_COMP1,  1, MNGUST_DZ1_OY1, lMtz1);//уставка Y1OF_DZ1
     81          
     82          //Re2
     83              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1Pickup.Z_OF_Dstp1_P2_R;
     84          //    X2OF_DZ1 = ((float)lMtz1)*diskr;
     85              SetUstToClon(DZ_COMP1,  1, MNGUST_DZ1_OX2, lMtz1);//уставка X2OF_DZ1
     86          //Im2
     87              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1Pickup.Z_OF_Dstp1_P2_X;
     88          //    Y2OF_DZ1 = ((float)lMtz1)*diskr;
     89              SetUstToClon(DZ_COMP1,  1, MNGUST_DZ1_OY2, lMtz1);//уставка Y2OF_DZ1
     90          
     91          //Re3
     92              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1Pickup.Z_OF_Dstp1_P3_R;
     93          //    X3OF_DZ1 = ((float)lMtz1)*diskr;
     94              SetUstToClon(DZ_COMP1,  1, MNGUST_DZ1_OX3, lMtz1);//уставка X3OF_DZ1
     95          //Im3
     96              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1Pickup.Z_OF_Dstp1_P3_X;
     97          //    Y3OF_DZ1 = ((float)lMtz1)*diskr;
     98              SetUstToClon(DZ_COMP1,  1, MNGUST_DZ1_OY3, lMtz1);//уставка Y3OF_DZ1
     99          
    100          //Re4
    101              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1Pickup.Z_OF_Dstp1_P4_R;
    102          //    X4OF_DZ1 = ((float)lMtz1)*diskr;
    103              SetUstToClon(DZ_COMP1,  1, MNGUST_DZ1_OX4, lMtz1);//уставка X4OF_DZ1
    104          //Im4
    105              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1Pickup.Z_OF_Dstp1_P4_X;
    106          //    Y4OF_DZ1 = ((float)lMtz1)*diskr;
    107              SetUstToClon(DZ_COMP1,  1, MNGUST_DZ1_OY4, lMtz1);//уставка Y4OF_DZ1
    108          
    109              //-----------MF
    110          //Re1
    111              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1Pickup.Z_MF_Dstp1_P1_R;
    112          //    X1MF_DZ1 = ((float)lMtz1)*diskr;
    113              SetUstToClon(DZ_COMP1,  1, MNGUST_DZ1_MX1, lMtz1);//уставка X1MF_DZ1
    114          //Im1
    115              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1Pickup.Z_MF_Dstp1_P1_X;
    116          //    Y1MF_DZ1 = ((float)lMtz1)*diskr;
    117              SetUstToClon(DZ_COMP1,  1, MNGUST_DZ1_MY1, lMtz1);//уставка Y1MF_DZ1
    118          
    119          //Re2
    120              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1Pickup.Z_MF_Dstp1_P2_R;
    121          //    X2MF_DZ1 = ((float)lMtz1)*diskr;
    122              SetUstToClon(DZ_COMP1,  1, MNGUST_DZ1_MX2, lMtz1);//уставка X2MF_DZ1
    123          //Im2
    124              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1Pickup.Z_MF_Dstp1_P2_X;
    125          //    Y2MF_DZ1 = ((float)lMtz1)*diskr;
    126              SetUstToClon(DZ_COMP1,  1, MNGUST_DZ1_MY2, lMtz1);//уставка Y2MF_DZ1
    127          
    128          //Re3
    129              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1Pickup.Z_MF_Dstp1_P3_R;
    130          //    X3MF_DZ1 = ((float)lMtz1)*diskr;
    131              SetUstToClon(DZ_COMP1,  1, MNGUST_DZ1_MX3, lMtz1);//уставка X3MF_DZ1
    132          //Im3
    133              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1Pickup.Z_MF_Dstp1_P3_X;
    134          //    Y3MF_DZ1 = ((float)lMtz1)*diskr;
    135              SetUstToClon(DZ_COMP1,  1, MNGUST_DZ1_MY3, lMtz1);//уставка Y3MF_DZ1
    136          
    137          //Re4
    138              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1Pickup.Z_MF_Dstp1_P4_R;
    139          //    X4MF_DZ1 = ((float)lMtz1)*diskr;
    140              SetUstToClon(DZ_COMP1,  1, MNGUST_DZ1_MX4, lMtz1);//уставка X4MF_DZ1
    141          //Im4
    142              lMtz1 = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1Pickup.Z_MF_Dstp1_P4_X;
    143          //    Y4MF_DZ1 = ((float)lMtz1)*diskr;
    144              SetUstToClon(DZ_COMP1,  1, MNGUST_DZ1_MY4, lMtz1);//уставка Y4MF_DZ1
    145          
    146          //DZ1MF
    147              lMtz1Tmr = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1StageParam.Dstp1_T_MF;
    148          
    149            SetUstToClon(DZ_COMP1,  1, MNGVID_DZ1MF, lMtz1Tmr*10);//уставка выдержки DZ1MF
    150            
    151          //MTZ DZ1MF
    152              lMtz1Tmr = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1StageParam.Dstp1_T_Ocp;
    153          
    154            SetUstToClon(DZ_COMP1,  1, MNGVID_MDZ1MF, lMtz1Tmr*10);//уставка выдержки MTZ DZ1MF
    155          
    156          //DZ1OF
    157              lMtz1Tmr = brCfgTbl.arPckpStpmStngStore[0].ownrStage1Dstp1StageParam.Dstp1_T_OF;
    158          
    159            SetUstToClon(DZ_COMP1,  1, MNGVID_DZ1OF, lMtz1Tmr*10);//уставка выдержки DZ1OF
    160          
    161            int uprDZ1=0;
    162            //меню  Состояние DZ1    
    163          //.	Состояние
    164          //.	1 -вкл
    165          //.	0 - выкл
    166              lSt1 = brCfgTbl.ownrStg1Dstp1Mng.state_dstp1;
    167            if(lSt1>0) uprDZ1 |= 1; //DZ1 WKL
    168            else  uprDZ1 &= ~1; //DZ1 OTKL 
    169            //меню  Состояние MTZ DZ1    
    170          //.	Состояние
    171          //.	1 -вкл
    172          //.	0 - выкл
    173              lSt1 = brCfgTbl.ownrStg1Dstp1Mng.state_ocp_dstp1;
    174            if(lSt1>0) uprDZ1 |= 2; //MTZ DZ1 WKL
    175            else  uprDZ1 &= ~2; //MTZ DZ1 OTKL 
    176            
    177            SetUstToClon(DZ_COMP1,  1, MNGUPR_DZ1, uprDZ1);//управление DZ1
    178          
    179          }//SettingIci_DZ1()
    180          

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       8   SettingIci_DZ1
         8   -> SetUstToClon


   Section sizes:

   Bytes  Function/Label
   -----  --------------
     980  SettingIci_DZ1

 
 980 bytes in section .text
 
 980 bytes of CODE memory

Errors: none
Warnings: none
