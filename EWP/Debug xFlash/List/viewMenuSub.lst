###############################################################################
#
# IAR ANSI C/C++ Compiler V7.40.2.8542/W32 for ARM        20/Oct/2015  12:49:48
# Copyright 1999-2015 IAR Systems AB.
#
#    Cpu mode     =  arm
#    Endian       =  little
#    Source file  =  
#        D:\IAR projects\HR1_0100_00_I720_new2\virtualMenu\viewMenuSub.c
#    Command line =  
#        "D:\IAR projects\HR1_0100_00_I720_new2\virtualMenu\viewMenuSub.c" -D
#        _STATIC_MEMORY_BOOT -lcN "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\Debug xFlash\List\" -o "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\Debug xFlash\Obj\" --no_cse
#        --no_unroll --no_inline --no_code_motion --no_tbaa --no_clustering
#        --no_scheduling --debug --endian=little --cpu=ARM926EJ-S -e
#        --fpu=VFP9-S --dlib_config "C:\Program Files\IAR Systems\Embedded
#        Workbench 7.40\arm\INC\c\DLib_Config_Normal.h" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\NXP\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\LIB\include\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\inc\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\Igor\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\mal\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\component\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\psupervisor\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\virtualMenu\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\callbackElement\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\logictimers\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\zonaVRT\" -I "D:\IAR
#        projects\HR1_0100_00_I720_new2\EWP\..\" --cpu_mode arm -On
#        --use_c++_inline
#    List file    =  
#        D:\IAR projects\HR1_0100_00_I720_new2\EWP\Debug
#        xFlash\List\viewMenuSub.lst
#    Object file  =  
#        D:\IAR projects\HR1_0100_00_I720_new2\EWP\Debug
#        xFlash\Obj\viewMenuSub.o
#
###############################################################################

D:\IAR projects\HR1_0100_00_I720_new2\virtualMenu\viewMenuSub.c
      1          /*
      2          #include <vcl.h>
      3          #include <strstrea.h>
      4          #include <math.h>
      5          #include <mem.h>
      6          #include <fstream.h>
      7          #include <strstrea.h>
      8          #include <iomanip.h>
      9          #pragma hdrstop
     10          
     11          #include "vmenuDis.h"
     12          */
     13          #include <stdio.h>
     14          #include <string.h>
     15          
     16          #include "bazisdef.h"
     17          #include "component\componentdef.h"
     18          #include "virtualMenu\systemmenudef.h"
     19          
     20          #include "virtualMenu\textstreamfnc.h"
     21          #include "virtualMenu\systemmenufnc.h"
     22          
     23          #include "virtualMenu\viewMenuTip.h"
     24          
     25          #include "..\bazis.h"
     26          
     27          short  KadrMenuFormat_sub(void *pstr)
     28          {
     29           WorkControl *workCntr = (WorkControl *)pstr;
     30          //формирователь кадра
     31            void *tmpP = NULL;
     32            RESET_COUNTER;//сброс счетчиков
     33            for(int i=0;; i++)
     34            {
     35          //критерий терминатора
     36              tmpP = ((LineMenuItem *)workCntr->userPoint)[i+1+SUBDATA].Line1;
     37              if(tmpP==NULL)break;
     38              COMPARE_COUNTER
     39              {
     40                strcpy((char *)workCntr->twoString, (char *)tmpP);
     41                return 1;//сравнить счетчики кадров
     42              }//COMPARE_COUNTER
     43            }//for
     44          
     45            return 1;
     46          }//KadrMenuFormat_sub(WorkControl *workCntr)
     47          
     48          void ViewDiskrMenuSub()
     49          {
     50            /*
     51          //вывести страницу
     52            WorkVariantChar workVariantCharLoc;//буфер кадра
     53          
     54            int tmp = TxtStreamIteratorBegin((void *)&workVariantCharLoc, CRR_TEXTSTREAM);//движение вниз
     55          
     56            if(tmp==-1) //файла нет или пустой
     57            {
     58              FvmenuDis->Str1Label->Caption = "ПУСТО";
     59              return ;
     60            }//if
     61          
     62            if(tmp==0) //достигнут конец файла
     63            {
     64              return ;
     65            }//if
     66            //показать результат
     67            FvmenuDis->Str1Label->Caption = workVariantCharLoc.TwoString[0];
     68          
     69            if(TxtStreamIteratorMidle(CRR_TEXTSTREAM)==0) //движение вниз
     70            {
     71              //достигнут конец файла
     72              PNTCRR_TEXTSTREAM->StpStringViewer = 0;//stp указател строки
     73              FvmenuDis->Str2Label->Caption = "";
     74              FvmenuDis->Str3Label->Caption = "";
     75              FvmenuDis->Str4Label->Caption = "";
     76              return ;
     77            }//if
     78            //показать результат
     79            FvmenuDis->Str2Label->Caption = workVariantCharLoc.TwoString[0];
     80          
     81            if(TxtStreamIteratorMidle(CRR_TEXTSTREAM)==0) //движение вниз
     82            {
     83              //достигнут конец файла
     84              PNTCRR_TEXTSTREAM->StpStringViewer = 1;//stp указател строки
     85              FvmenuDis->Str3Label->Caption = "";
     86              FvmenuDis->Str4Label->Caption = "";
     87              return ;
     88            }//if
     89            //показать результат
     90            FvmenuDis->Str3Label->Caption = workVariantCharLoc.TwoString[0];
     91          
     92            if(TxtStreamIteratorMidle(CRR_TEXTSTREAM)==0)
     93            {
     94              //достигнут конец файла
     95              PNTCRR_TEXTSTREAM->StpStringViewer = 2;//stp указател строки
     96              FvmenuDis->Str4Label->Caption = "";
     97              return ;
     98            }//if
     99            //показать результат
    100            FvmenuDis->Str4Label->Caption = workVariantCharLoc.TwoString[0];
    101          
    102            TxtStreamIteratorEnd(CRR_TEXTSTREAM);//конец страницы
    103          
    104            PNTCRR_TEXTSTREAM->StpStringViewer = 3;//stp указател строки
    105          */
    106          }//ViewDiskrMenuSub()
    107          
    108          void SetPgUpButton(short flg)
    109          {
    110            /*
    111          //страница вверх
    112          //типажи
    113            short typeWin = PNTCRR_SUBMENU(SUBDATA).TypesWin;
    114            PNTCRR_TEXTSTREAM->topStrPnt = TxtStreamPgUpButtonPrepare(CRR_TEXTSTREAM);//подготовка
    115            switch(typeWin)
    116            {
    117            case typeMenuReg:
    118            case typeMenuList:
    119            case typeMenuEditRang:
    120            case typeMenuEditWL:
    121            case typeMenuViewActual:
    122            case typeMenuViewRDISMaska:
    123            case typeMenuViewActualDV:
    124            case typeMenuViewActualRele:
    125              ViewDiskrMenu(typeWin);//вывести окно отображения
    126              if(typeWin==typeMenuReg || typeWin==typeMenuViewActual) break;
    127              else ListPStr();//доступ к уставкам
    128              break;
    129          
    130            case typeMenuCnfWL:
    131            case typeMenuCnf:
    132            case typeMenuSub:
    133            case typeMenuViewRangDV:
    134            case typeMenuViewRangRele:
    135            case typeMenuViewRangCDI:
    136            case typeMenuViewLE:
    137            {
    138              if(PNTCRR_TEXTSTREAM->PntStringViewer!=-10 &&
    139                  PNTCRR_TEXTSTREAM->topStrPnt<0
    140                ) PNTCRR_TEXTSTREAM->PntStringViewer = 0;
    141              else
    142              {
    143                PNTCRR_TEXTSTREAM->PntStringViewer = SIZE_PAGE_VIEW-1;
    144              }//else
    145          
    146              if(flg==0) PNTCRR_TEXTSTREAM->PntStringViewer = 0;
    147          
    148              ViewDiskrMenu(typeWin);//вывести окно отображения
    149              LanderPStr();//размещение указателя строки
    150            }
    151            break;
    152          
    153            }//switch
    154          
    155            if(FvmenuDis->TipPanel->Visible) PgUpTipPanel();
    156            */
    157          }//SetPgUpButton(short flg)
    158          
    159          void PereinitSub(short flg)
    160          {
    161            //ф-ция переинит Sub
    162            TxtStreamReset(CRR_TEXTSTREAM);//сброс счетчиков
    163          
    164            PNTCRR_TEXTSTREAM->PntStringViewer = 0;
    165            if(flg==0)//END
    166            {
    167              TxtStreamSetEnd(CRR_TEXTSTREAM, SIZE_PAGE_VIEW);//перейти на END
    168            }//if
    169            ViewDiskrMenu(typeMenuSub);//вывести окно отображения
    170            LanderPStr();//размещение указателя строки
    171          }//PereinitSub()
    172          
    173          void OpenMenuSub()
    174          {
    175          //открыть меню view
    176            TxtStreamCorrect(CRR_TEXTSTREAM);//коррекция текущий control
    177          //  CRR_TEXTSTREAM = PNTCRR_SUBMENU(SUBDATA).Line1;//новый текущий control
    178            SelectorTEXTCONTROL(PNTCRR_SUBMENU(SUBDATA).Line1);//установить текущую ссылку на текстовый поток
    179            TxtStreamCorrect(CRR_TEXTSTREAM);//коррекция текущий control
    180          
    181            ViewDiskrMenu(typeMenuSub);//вывести окно отображения
    182          //  CRR_FHOME = &PereinitSub;//указатель на ф-цию HOME
    183            SelectorFHOME(&PereinitSub);//указатель на ф-цию HOME
    184          
    185            LanderPStr();//размещение указателя строки
    186          }//OpenMenuView()
    187          
    188          

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
      16   KadrMenuFormat_sub
        16   -> strcpy
       8   OpenMenuSub
         8   -> LanderPStr
         8   -> SelectorFHOME
         8   -> SelectorTEXTCONTROL
         8   -> TxtStreamCorrect
         8   -> ViewDiskrMenu
       8   PereinitSub
         8   -> LanderPStr
         8   -> TxtStreamReset
         8   -> TxtStreamSetEnd
         8   -> ViewDiskrMenu
       0   SetPgUpButton
       0   ViewDiskrMenuSub


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable1
     128  KadrMenuFormat_sub
      68  OpenMenuSub
      88  PereinitSub
       4  SetPgUpButton
       4  ViewDiskrMenuSub

 
 296 bytes in section .text
 
 296 bytes of CODE memory

Errors: none
Warnings: none
